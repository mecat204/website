<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>3D相册·凡人修仙传（优化版）</title>

<style>
*{
	margin:0;
	padding:0;
}
body{
	background:black;
	overflow:hidden;
}

#perspective{
	perspective:1000px; /* 景深更深 */
}

/* 整个相册容器 */
#wrap{
	width:200px;   /* 图片更大 */
	height:300px;
	position:relative;
	margin:0 auto;
	transform-style:preserve-3d;
	transform:rotateX(-10deg) rotateY(0deg);
}

/* 图片样式 */
#wrap img{
	position:absolute;
	width:100%;
	height:100%;
	border-radius:10px;

	/* 柔和一点的阴影 */
	box-shadow:0 0 10px rgba(255,100,150,0.8);

	/* 反射倒影 */
	-webkit-box-reflect:below 8px -webkit-linear-gradient(top,rgba(0,0,0,0) 20%,rgba(0,0,0,0.5) 70%);
}

/* 底部光环 */
#wrap p{
	width:1500px;
	height:1500px;
	background:-webkit-radial-gradient(center center,700px 700px,rgba(255,0,120,0.18),rgba(0,0,0,0));
	border-radius:100%;
	position:absolute;
	top:105%;
	left:50%;
	margin-left:-750px;
	margin-top:-750px;
	transform:rotateX(90deg);
}
</style>

<script>
window.onload = function(){
	var oWrap = document.getElementById("wrap");
	var imgs = oWrap.getElementsByTagName("img");
	var len = imgs.length;
	var deg = 360 / len;

	var nowX, nowY;
	var lastX, lastY;
	var minusX = 0, minusY = 0;
	var roX = -10, roY = 0;
	var timer = null;

	/* 调大旋转半径：translateZ(500px) */
	for(let i=0; i<len; i++){
		imgs[i].style.transform = `rotateY(${i*deg}deg) translateZ(500px)`;
		imgs[i].style.transition = `transform 1s ${(len-1-i)*0.1}s`;
	}

	/* 居中 */
	setWrapTop();
	window.onresize = setWrapTop;
	function setWrapTop(){
		var h = document.documentElement.clientHeight;
		oWrap.style.marginTop = (h/2 - 150) + "px"; /* 根据新高度300调整 */
	}

	/* 鼠标事件 */
	document.onmousedown = function(ev){
		ev = ev || window.event;
		lastX = ev.clientX;
		lastY = ev.clientY;

		document.onmousemove = function(ev){
			ev = ev || window.event;
			clearInterval(timer);

			nowX = ev.clientX;
			nowY = ev.clientY;

			minusX = nowX - lastX;
			minusY = nowY - lastY;

			roY += minusX * 0.2;
			roX -= minusY * 0.1;

			oWrap.style.transform = `rotateX(${roX}deg) rotateY(${roY}deg)`;

			lastX = nowX;
			lastY = nowY;
		};

		document.onmouseup = function(){
			document.onmousemove = null;

			timer = setInterval(function(){
				minusX *= 0.95;
				minusY *= 0.95;

				roY += minusX * 0.2;
				roX -= minusY * 0.1;

				oWrap.style.transform = `rotateX(${roX}deg) rotateY(${roY}deg)`;

				if(Math.abs(minusX)<0.3 && Math.abs(minusY)<0.3){
					clearInterval(timer);
				}
			}, 16);
		};

		return false;
	};
};
</script>
</head>

<body>
	<div id="perspective">
		<div id="wrap">
			<img src="./me.pic/images/0001.jpeg">
			<img src="./me.pic/images/0002.jpeg">
			<img src="./me.pic/images/0003.jpeg">
			<img src="./me.pic/images/0004.jpeg">
			<img src="./me.pic/images/0005.jpeg">
			<img src="./me.pic/images/0006.jpeg">
			<img src="./me.pic/images/0007.jpeg">
			<img src="./me.pic/images/0008.jpeg">
			<img src="./me.pic/images/0009.jpeg">
			<img src="./me.pic/images/0010.jpeg">
			<img src="./me.pic/images/0011.jpeg">
			<img src="./me.pic/images/0012.jpeg">
			<p></p>
		</div>
	</div>
</body>
</html>
