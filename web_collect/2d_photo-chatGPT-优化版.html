<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="author" content="chatGPT">
<title>滑动相册</title>
<style>
* {margin:0; padding:0; box-sizing:border-box;}
body {
    background:#000;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    overflow:hidden;
}

/* 主容器 */
#album3d {
  width: 100vw;
  height: 380px;
  position: relative;
}

/* 轨道容器，让所有图片位置以中心为基准 */
.track {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  height: 100%;
  pointer-events: none;
}

/* 单个图片项 */
.item {
  position: absolute;
  width: 240px;   /* 整体放大 50% 左右 */
  height: 320px;
  transition: transform 0.35s ease, opacity 0.35s ease;
}

.item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 12px;
  box-shadow: 0 8px 15px rgba(255,30,90,0.25);
  -webkit-box-reflect: below 6px linear-gradient(transparent, rgba(0,0,0,0.4));
}
</style>
</head>
<body>

<div id="album3d">
  <div class="track">
      <div class="item"><img src="./me.pic/images/0001.jpeg"></div>
      <div class="item"><img src="./me.pic/images/0002.jpeg"></div>
      <div class="item"><img src="./me.pic/images/0003.jpeg"></div>
      <div class="item"><img src="./me.pic/images/0004.jpeg"></div>
      <div class="item"><img src="./me.pic/images/0005.jpeg"></div>
      <div class="item"><img src="./me.pic/images/0006.jpeg"></div>
      <div class="item"><img src="./me.pic/images/0007.jpeg"></div>
      <div class="item"><img src="./me.pic/images/0008.jpeg"></div>
  </div>
</div>

<script>
const items = [...document.querySelectorAll(".item")];
const VISIBLE = 5;

// === 适中间距：不挤、不散 ===
const GAP = 400;

// === 中间放大 70% ===
const SCALE_CENTER = 1.7;

let current = 0;

// === 更新布局 ===
function update() {
  const len = items.length;

  for (let i=0;i<len;i++){
    let diff = i - current;

    // 环形调整
    if(diff > len/2) diff -= len;
    if(diff < -len/2) diff += len;

    const abs = Math.abs(diff);

    // 不显示范围之外的
    if(abs > Math.floor(VISIBLE/2)){
      items[i].style.opacity = 0;
      items[i].style.transform = "scale(0.4)";
      continue;
    }

    const x = diff * GAP;
    const scale = SCALE_CENTER - abs * 0.22;
    const opacity = 1 - abs * 0.22;

    items[i].style.opacity = opacity;
    items[i].style.transform = `translateX(${x}px) scale(${scale})`;
  }
}
update();

// === 拖拽 ===
let startX = 0;
let down = false;

function pointerDown(e){
  down = true;
  startX = e.clientX || e.touches?.[0].clientX;
}

function pointerMove(e){
  if(!down) return;
  const x = e.clientX || e.touches?.[0].clientX;
  const dx = x - startX;

  if(dx > 15){
    current = (current - 1 + items.length) % items.length;
    startX = x;
    update();
  } else if(dx < -15){
    current = (current + 1) % items.length;
    startX = x;
    update();
  }
}

function pointerUp(){ down = false; }

document.addEventListener("pointerdown", pointerDown);
document.addEventListener("pointermove", pointerMove);
document.addEventListener("pointerup", pointerUp);
document.addEventListener("pointercancel", pointerUp);
</script>

</body>
</html>
